<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title>购物车页面</title>
		<link rel="stylesheet" href="css/shopingbag.css" />
		<link rel="stylesheet" href="css/general.css" />
	</head>
	<body>
		<!--spbag header start-->
		<div id="spheader"></div>
		<!--spbag header end-->
		
		<div class="shopingbag">
			<div class="shopcar">
				<table>
					<div class="sp-thead">
						<h3>
							<a href=""><img src="img/logo-yg.png" alt="优生活，购时尚" /></a>
						</h3>
						<div class="sp-progress">
							<ul>
								<li>
									我的购物袋
									<em></em>
									<i></i>
									
								</li>
								<li>
									提交订单中心
									<em></em>
									<i></i>
								</li>
								<li>
									成功提交订单
									<em></em>
									<i></i>
								</li>
							</ul>
						</div>
					</div>
					<div class="tablebox">
						<div class="sp-table">
							<ul>
								<li><a href="">
									<input type="checkbox" />全选</a></li>
								<li>商品名称</li>
								<li>颜色尺码</li>
								<li>单价</li>
								<li>数量</li>
								<li>小计（元）</li>
								<li>操作</li>
							</ul>
						</div>
						<ul id="shopingGoods">
							<li class="sp-goods">
								<p class="goods imgBox">
									<input type="checkbox" />
									<a href="" class="goodsimg"><img src="img/101_t.jpg" alt="" /></a>
								</p>		
								<p class="goodsdetails goods">
									<a href="">Tata/他她2018冬专柜同款黑色拼接长筒靴骑士靴瘦瘦靴粗跟女长靴2BS90DC8</a>
								</p>
								
								<div class="color-size goods">
									<p class="cgray tleft">
									颜色：
									<em class="f_gray">黑色</em>
									</p>
									<p class="cgray tleft">
										尺码：
										<em class="f_gray">39</em>
									</p>
								</div>
								
								
								<p class="goods price"><span class="priceId">1000</span></p>
								<p class="selectnumb goods">
									<input type="button" value="-" class="reduce" style="width:20px;"/>
									<input type="text" value="1" class="currrent" min="1" style="width:30px;text-align: center;"/>
									<input type="button" value="+" class="add" style="width:20px;"/>
								</p>
								<p class="goods goodsmony totalmoney" >
									340
								</p>
								<div class="goods addmove">
										<a href="" class="move">移入收藏夹</a>
										<a href="" class="delete">删除</a>
								</div>
							</li>
							
							<li class="sp-goods">
								<p class="goods">
									<input type="checkbox" />
									<a href="" class="goodsimg"><img src="img/101_t.jpg" alt="" /></a>
								</p>		
								<p class="goodsdetails goods">
									<a href="">Tata/他她2018冬专柜同款黑色拼接长筒靴骑士靴瘦瘦靴粗跟女长靴2BS90DC8</a>
								</p>
								
								<div class="color-size goods">
									<p class="cgray tleft">
									颜色：
									<em class="f_gray">黑色</em>
									</p>
									<p class="cgray tleft">
										尺码：
										<em class="f_gray">39</em>
									</p>
								</div>
								
								
								<p class="goods price"><span class="priceId">1000</span></p>
								<p class="selectnumb goods">
									<input type="button" value="-" class="reduce" style="width:20px;"/>
									<input type="text" value="1" class="currrent" min="1" style="width:30px;text-align: center;"/>
									<input type="button" value="+" class="add" style="width:20px;"/>
								</p>
								<p class="goods goodsmony totalmoney" >
									340
								</p>
								<div class="goods addmove">
										<a href="" class="move">移入收藏夹</a>
										<a href="" class="delete">删除</a>
								</div>
							</li>
						</ul>
						<div class="sp-select">
							<ul>
								<li><a href="">
									<input type="checkbox" />
									全选</a></li>
								<li><a href="">移入收藏夹</a></li>
								<li><a href="" class="deleteAll">删除</a></li>
							</ul>
						</div>
					</div>	
					<div class="sp-continue">
						<p class="jixvg"><a href="">继续购物</a></p>
						<p class="qkgwd"><a href="">清空购物袋</a></p>
						<div class="moneybox">
							<div class="Summoney">
								<p>
									<strong>总计（不含运费 ）：</strong>
									<strong>¥<span id="Totalmoney">0</span></strong>
								</p>	
								<a href="" class="Maccount">去结算</a>
							</div>
							
						</div>
					</div>
				</table>
			</div>
			
		</div>
		
		<!--spbag footer start-->
		<div id="spfoot"></div>
		<!--spbag footer end-->
	</body>
</html>
<script type="text/javascript" src="js/jquery-1.8.3.min.js" ></script>
<script type="text/javascript">
	$(function(){
		//计算并改变每种商品的总价
			let len = $(".totalmoney").length;
			for(let i=0;i<len;i++){
				let num = Number(($(".totalmoney")[i]).previousElementSibling.children[1].value);
				let price = Number(($(".totalmoney")[i]).previousElementSibling.previousElementSibling.firstChild.innerHTML);
				$(".totalmoney")[i].innerHTML=num*price;
			}
		//点击减号计算并改变数据	
		$(".reduce").click(function(){
			let num = $(this).next().val();
			if(num<=0){
				$(this).parent().next().html("0");	
			}else{
				num--;
				$(this).next().val(num);
				//console.log($("#currrent").val());
				let price = $(this).parent().prev().children().html();
				let Summoney = num*price
				$(this).parent().next().html(Summoney);
				Totalmoney();
			}	
		});	
	});
	
	//点击减号计算并改变数据	
	$(function(){
		//计算所有商品总价
		Totalmoney();
		$(".add").click(function(){
			let num = $(this).prev().val();
			num++;
			$(this).prev().val(num);
			//console.log($("#currrent").val());
			let price = $(this).parent().prev().children().html();
			let Summoney = num*price
			//$(".totalmoney").html(Summoney);
			$(this).parent().next().html(Summoney);
			Totalmoney();
		});
	});
	
	
	//计算所有商品总价	
	function Totalmoney(){
		let L = $(".totalmoney").length;
		let Allmoney =0;
		for(let i=0;i<L;i++){
			Allmoney+=Number($(".totalmoney")[i].innerHTML);
			//console.log(Allmoney);
		}
		$("#Totalmoney").html(Allmoney);
	}
	
	
	
//$("#shopingGoods").remove($(".delete")[0].parentNode.parentNode.parentNode);
	//删除商品()
	$(".delete").click(function(){
		//不能仅隐藏,还需要删除Dom
		//$(this).parent().parent().parent().css("display","none");
		if(confirm("您确定要删除该商品吗?")){
			$(this).parent().parent().remove();
			return false;//组织冒泡（可能是布局问题导致事件冒泡）需要确认
		}
		
	})



	
</script>